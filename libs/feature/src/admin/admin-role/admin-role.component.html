<div class="main-container">
  <mat-tab-group mat-stretch-tabs="false" mat-align-tabs="start">
    <mat-tab label="จัดการสิทธิ์ผู้ใช้งาน">
      <div class="request-table default-table">
        <table
          class="admin-role-table"
          mat-table
          [dataSource]="dataSource"
          matSort
        >
          <ng-container matColumnDef="roleName">
            <th mat-header-cell *matHeaderCellDef>Roles</th>
            <td mat-cell *matCellDef="let row">
              {{ row.roleName }}
            </td>
          </ng-container>

          <ng-container matColumnDef="accReq">
            <th mat-header-cell *matHeaderCellDef>การขอใช้ข้อมูล</th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.accessControl.accReq === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.accessControl.accReq === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.accessControl.accReq === 'T'
                    ? (row.accessControl.accReq = 'N')
                    : (row.accessControl.accReq = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.accessControl.accReq === 'N' && row.isEdit"
                (click)="row.accessControl.accReq = 'T'"
              ></div>
            </td>
          </ng-container>

          <ng-container matColumnDef="accAdd">
            <th mat-header-cell *matHeaderCellDef>การสร้าง / ลบ API ข้อมูล</th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.accessControl.accAdd === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.accessControl.accAdd === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.accessControl.accAdd === 'T'
                    ? (row.accessControl.accAdd = 'N')
                    : (row.accessControl.accAdd = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.accessControl.accAdd === 'N' && row.isEdit"
                (click)="row.accessControl.accAdd = 'T'"
              ></div>
            </td>
          </ng-container>
          <ng-container matColumnDef="accEdit">
            <th mat-header-cell *matHeaderCellDef>การแก้ไข API ข้อมูล</th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.accessControl.accEdit === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.accessControl.accEdit === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.accessControl.accEdit === 'T'
                    ? (row.accessControl.accEdit = 'N')
                    : (row.accessControl.accEdit = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.accessControl.accEdit === 'N' && row.isEdit"
                (click)="row.accessControl.accEdit = 'T'"
              ></div>
            </td>
          </ng-container>
          <ng-container matColumnDef="accApproveApi">
            <th mat-header-cell *matHeaderCellDef>
              การอนุมัติการขอใช้ API ข้อมูล
            </th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.accessControl.accApproveApi === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.accessControl.accApproveApi === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.accessControl.accApproveApi === 'T'
                    ? (row.accessControl.accApproveApi = 'N')
                    : (row.accessControl.accApproveApi = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.accessControl.accApproveApi === 'N' && row.isEdit"
                (click)="row.accessControl.accApproveApi = 'T'"
              ></div>
            </td>
          </ng-container>
          <ng-container matColumnDef="accSetApi">
            <th mat-header-cell *matHeaderCellDef>การแก้ไขการตั้งค่าระบบ</th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.accessControl.accSetApi === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.accessControl.accSetApi === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.accessControl.accSetApi === 'T'
                    ? (row.accessControl.accSetApi = 'N')
                    : (row.accessControl.accSetApi = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.accessControl.accSetApi === 'N' && row.isEdit"
                (click)="row.accessControl.accSetApi = 'T'"
              ></div>
            </td>
          </ng-container>
          <ng-container matColumnDef="accSetAccess">
            <th mat-header-cell *matHeaderCellDef>
              การกำหนดสิทธิ์ผู้ใช้ในระบบ
            </th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.accessControl.accSetAccess === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.accessControl.accSetAccess === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.accessControl.accSetAccess === 'T'
                    ? (row.accessControl.accSetAccess = 'N')
                    : (row.accessControl.accSetAccess = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.accessControl.accSetAccess === 'N' && row.isEdit"
                (click)="row.accessControl.accSetAccess = 'T'"
              ></div>
            </td>
          </ng-container>
          <ng-container matColumnDef="accManageUser">
            <th mat-header-cell *matHeaderCellDef>การจัดการผู้ใช้งานระบบ</th>

            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.accessControl.accManageUser === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.accessControl.accManageUser === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.accessControl.accManageUser === 'T'
                    ? (row.accessControl.accManageUser = 'N')
                    : (row.accessControl.accManageUser = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.accessControl.accManageUser === 'N' && row.isEdit"
                (click)="row.accessControl.accManageUser = 'T'"
              ></div>
            </td>
          </ng-container>
          <ng-container matColumnDef="accApproveService">
            <th mat-header-cell *matHeaderCellDef>ตรวจสอบและส่งต่อการขอใช้</th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="
                  row.accessControl.accApproveService === 'T' && !row.isEdit
                "
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="
                  row.accessControl.accApproveService === 'T' && row.isEdit
                "
                src="assets/icon/tick-icon.png"
                (click)="
                  row.accessControl.accApproveService === 'T'
                    ? (row.accessControl.accApproveService = 'N')
                    : (row.accessControl.accApproveService = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="
                  row.accessControl.accApproveService === 'N' && row.isEdit
                "
                (click)="row.accessControl.accApproveService = 'T'"
              ></div>
            </td>
          </ng-container>
          <ng-container matColumnDef="accArticle">
            <th mat-header-cell *matHeaderCellDef>
              การกำหนดสิทธิ์ผู้ใช้งานในการเขียนบทความ
            </th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.accessControl.accArticle === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.accessControl.accArticle === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.accessControl.accArticle === 'T'
                    ? (row.accessControl.accArticle = 'N')
                    : (row.accessControl.accArticle = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.accessControl.accArticle === 'N' && row.isEdit"
                (click)="row.accessControl.accArticle = 'T'"
              ></div>
            </td>
          </ng-container>
          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let row">
              <button
                mat-flat-button
                class="default-button activate-button"
                (click)="onEdit(row)"
                *ngIf="row.roleId !== 1"
              >
                {{ row.isEdit ? 'บันทึก' : 'แก้ไข' }}
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
      </div>
    </mat-tab>
    <mat-tab label="จัดการสิทธิ์การจัดการบทความ / ข่าวสาร">
      <div class="request-table default-table">
        <table
          class="admin-role-table"
          mat-table
          [dataSource]="articleRoles"
          matSort
        >
          <ng-container matColumnDef="rolearcName">
            <th mat-header-cell *matHeaderCellDef>Roles</th>
            <td mat-cell *matCellDef="let row">
              {{ row.rolearcName }}
            </td>
          </ng-container>

          <ng-container matColumnDef="rolearcAddUpdate">
            <th mat-header-cell *matHeaderCellDef>
              เพิ่ม / แก้ไขบทความข่าวสาร
            </th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.rolearcAddUpdate === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.rolearcAddUpdate === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.rolearcAddUpdate === 'T'
                    ? (row.rolearcAddUpdate = 'N')
                    : (row.rolearcAddUpdate = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.rolearcAddUpdate === 'N' && row.isEdit"
                (click)="row.rolearcAddUpdate = 'T'"
              ></div>
            </td>
          </ng-container>
          <ng-container matColumnDef="rolearcDelete">
            <th mat-header-cell *matHeaderCellDef>ลบบทความข่าวสาร</th>
            <td mat-cell *matCellDef="let row">
              <img
                class="tick-icon"
                *ngIf="row.rolearcDelete === 'T' && !row.isEdit"
                src="assets/icon/tick-icon.png"
              />
              <img
                class="tick-icon--edit"
                *ngIf="row.rolearcDelete === 'T' && row.isEdit"
                src="assets/icon/tick-icon.png"
                (click)="
                  row.rolearcDelete === 'T'
                    ? (row.rolearcDelete = 'N')
                    : (row.rolearcDelete = 'T')
                "
              />
              <div
                class="empty-square"
                *ngIf="row.rolearcDelete === 'N' && row.isEdit"
                (click)="row.rolearcDelete = 'T'"
              ></div>
            </td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let row">
              <button
                mat-flat-button
                class="default-button activate-button"
                (click)="onArticleEdit(row)"
              >
                {{ row.isEdit ? 'บันทึก' : 'แก้ไข' }}
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedArticleColumns"></tr>
          <tr
            mat-row
            *matRowDef="let row; columns: displayedArticleColumns"
          ></tr>
        </table>
      </div>
    </mat-tab>
  </mat-tab-group>
</div>
