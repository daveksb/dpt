<div class="page-content">
  <div class="main-container">
    <div class="data-detail-header">
      <div class="left-container">
        <div *ngIf="apiDetail" class="other-label">
          บริการข้อมูล > {{ apiDetail.catName }} >
        </div>
        <div *ngIf="apiDetail" class="api-name">
          &nbsp;
          {{ apiDetail.apiName }}
        </div>
      </div>
      <div class="back-button" (click)="back()">< Back</div>
    </div>
    <div class="request-label header-1">
      {{ apiDetail?.apiName }}
    </div>

    <div class="data-button-container">
      <button
        mat-stroked-button
        class="default-button big-button"
        color="primary"
        (click)="onShowExampleData()"
      >
        ตัวอย่างข้อมูล
      </button>
      <button
        mat-flat-button
        class="request-data-button big-button"
        color="primary"
        (click)="onRequestData()"
      >
        ขอใช้ข้อมูล
      </button>
    </div>
    <div class="data-detail-body">
      <mat-tab-group class="data-tab" dynamicHeight>
        <mat-tab>
          <ng-template mat-tab-label>
            <img class="small-icon" src="assets/icon/file.svg" />
            รายละเอียด
          </ng-template>
          <div class="data-detail-tab">
            <div class="image-container">
              <div class="image"></div>
            </div>
            <div class="detail-container">
              <div class="department-container">
                {{ apiDetail?.departmentName }}
              </div>
              <div class="topic-container">
                {{ apiDetail?.apiName }}
              </div>
              <div class="file-type-container">
                <dpt-file-button
                  [formatType]="apiDetail?.tType ?? ''"
                ></dpt-file-button>
              </div>
              <div class="view-container">
                <div class="icon-container">
                  <mat-icon>visibility</mat-icon>
                </div>
                {{ apiDetail?.countview }} Views
              </div>
              <div class="detail1-container">
                {{ apiDetail?.apiDetail }}
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab *ngIf="apiDetail?.tType === 'api'">
          <ng-template mat-tab-label>
            <img class="small-icon" src="assets/icon/chip.svg" />
            การใช้งาน Api
          </ng-template>
          <div class="data-detail-api">
            <div class="api-service">API Service</div>
            <div class="api-link">
              <img
                class="copy-icon"
                (click)="copy()"
                src="assets/icon/copy.svg"
              />
              <div class="api-link-label">
                {{ apiDetail?.apiLink }}
              </div>
            </div>
            <div class="api-param-table">
              <table mat-table [dataSource]="dataSource">
                <ng-container matColumnDef="name">
                  <th mat-header-cell *matHeaderCellDef>Name</th>
                  <td mat-cell *matCellDef="let row">{{ row.name }}</td>
                </ng-container>
                <ng-container matColumnDef="type">
                  <th mat-header-cell *matHeaderCellDef>Type</th>
                  <td mat-cell *matCellDef="let row">{{ row.type }}</td>
                </ng-container>
                <ng-container matColumnDef="description">
                  <th mat-header-cell *matHeaderCellDef>Type</th>
                  <td mat-cell *matCellDef="let row">{{ row.description }}</td>
                </ng-container>
                <ng-container matColumnDef="default">
                  <th mat-header-cell *matHeaderCellDef>Default</th>
                  <td mat-cell *matCellDef="let row">{{ row.default }}</td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr
                  mat-row
                  *matRowDef="let row; columns: displayedColumns"
                ></tr>
              </table>
            </div>
            <hr />
            <!-- <div class="api-data-label">การเรียกข้อมูล API</div>
            <div class="api-data-container">
              <div class="label">Connection String :</div>
              <div class="value">
                {{ apiDetail.api.connectionString }}
              </div>
              <div class="label">ตัวอย่างการเรียกข้อมูล:</div>
              <div class="value">
                {{ apiDetail.api.dataRequestExample }}
              </div>
              <div class="label">ตัวอย่าง Javascript :</div>
              <div class="value">
                {{ apiDetail.api.javascriptExample }}
              </div>
            </div> -->
          </div>
        </mat-tab>
      </mat-tab-group>
    </div>
  </div>
</div>
