<div class="page-content" [formGroup]="formGroup">
  <div class="data-request-form-item">
    <div class="data-request-form-header">กรอกรายละเอียดคำขอชุดข้อมูล</div>
    <div class="data-request-form-body">
      <div class="department-container">
        <mat-form-field class="form-field" appearance="outline">
          <mat-label>หน่วยงาน</mat-label>
          <input
            type="text"
            matInput
            formControlName="departmentId"
            placeholder="หน่วยงาน"
          />
        </mat-form-field>
      </div>
      <div class="category-container">
        <mat-form-field class="form-field" appearance="outline">
          <mat-label>หมวดหมู่</mat-label>

          <mat-select formControlName="categoryId" placeholder="หมวดหมู่">
            <mat-option *ngFor="let item of category" [value]="item.catId">
              {{ item.catName }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="name-container">
        <mat-form-field class="form-field" appearance="outline">
          <mat-label>ชื่อชุดข้อมูล</mat-label>
          <input
            type="text"
            matInput
            formControlName="requestName"
            placeholder="กรอกชื่อชุดข้อมูล"
          />
        </mat-form-field>
      </div>
      <div class="detail-container">
        <mat-form-field class="form-field" appearance="outline">
          <mat-label>รายละเอียด</mat-label>
          <textarea
            type="text"
            matInput
            formControlName="requestDetail"
            placeholder="กรอกรายละเอียด"
          ></textarea>
        </mat-form-field>
      </div>
    </div>
    <div class="data-request-file-container">
      <div class="data-request-file-header">เอกสารคำร้อง / เอกสารแนบ</div>
      <div class="data-request-file-body">
        <div class="data-request-file-label">
          Select a file or drag and drop here
        </div>
        <button
          mat-stroked-button
          class="data-request-file-button"
          (click)="fileInput.click()"
        >
          Select File
        </button>
      </div>
      <div *ngIf="rfdata" class="data-request-file-list-label">File added</div>

      <div *ngIf="rfdata" class="data-request-file-list-container">
        <div class="file-item" *ngFor="let item of tempFile">
          <div class="file-name">{{ item.file.name }}</div>
          <div class="file-size">{{ item.file.size }} Bytes</div>
          <div class="file-status">
            <div *ngIf="item.status === 'LOADING'">
              <mat-spinner [diameter]="40"></mat-spinner>
            </div>
            <div *ngIf="item.status === 'DONE'">
              <img
                src="assets/icon/delete.svg"
                class="default-icon"
                (click)="deleteFile(item)"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="data-request-form-footer">
      <button mat-flat-button class="data-request-button" (click)="onConfirm()">
        ยืนยัน
      </button>
      <button
        class="back-button"
        type="submit"
        mat-stroked-button
        (click)="back()"
      >
        ยกเลิก
      </button>
    </div>
  </div>
  <input
    class="is-invisible"
    (change)="onFileChange($event)"
    type="file"
    #fileInput
    formControlName="rfdata"
  />
</div>
